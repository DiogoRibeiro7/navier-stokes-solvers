# Navier-Stokes Solvers

<!-- Build status -->
[![CI](https://github.com/diogoribeiro7/navier-stokes-solvers/actions/workflows/ci.yml/badge.svg)](https://github.com/diogoribeiro7/navier-stokes-solvers/actions/workflows/ci.yml)

<!-- Coverage -->
[![Coverage Status](https://img.shields.io/codecov/c/github/diogoribeiro7/navier-stokes-solvers/main.svg)](https://codecov.io/gh/diogoribeiro7/navier-stokes-solvers)

<!-- License -->
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)

<!-- DOI -->
[![DOI](https://img.shields.io/badge/DOI-10.5281%2Fzenodo.XXXXXXX-blue.svg)](https://doi.org/10.5281/zenodo.XXXXXXX)

<!-- Downloads -->
[![GitHub all releases](https://img.shields.io/github/downloads/diogoribeiro7/navier-stokes-solvers/total.svg)](https://github.com/diogoribeiro7/navier-stokes-solvers/releases)

<!-- Documentation -->
[![Docs](https://img.shields.io/badge/docs-latest-brightgreen.svg)](https://diogoribeiro7.github.io/navier-stokes-solvers/)

<!-- Tests -->
[![Tests](https://img.shields.io/github/actions/workflow/status/diogoribeiro7/navier-stokes-solvers/tests.yml?label=tests)](https://github.com/diogoribeiro7/navier-stokes-solvers/actions/workflows/tests.yml)

<!-- GitHub stars/forks -->
[![GitHub stars](https://img.shields.io/github/stars/diogoribeiro7/navier-stokes-solvers.svg?style=social)](https://github.com/diogoribeiro7/navier-stokes-solvers/stargazers)
[![GitHub forks](https://img.shields.io/github/forks/diogoribeiro7/navier-stokes-solvers.svg?style=social)](https://github.com/diogoribeiro7/navier-stokes-solvers/network/members)

This repository hosts complementary implementations of the two-dimensional incompressible Navier-Stokes equations:

- A Newton-Raphson finite difference solver with multigrid pressure correction.
- A Fourier pseudospectral solver with hyperviscosity, stochastic forcing, and adaptive time stepping.

Both solvers share a common configuration system, automated testing, and publication-ready assets (manuscript, figures, slides).

## Repository Layout

```
.
├── config/                  # Baseline configuration files (INI/JSON)
├── docker/                  # Developer container definitions
├── paper/                   # Manuscript, figures, references
├── presentation/            # Slide deck sources and generator
├── scripts/                 # Utility scripts (install, benchmarks, release)
├── src/                     # Solver source code
├── tests/                   # C regression tests
├── TESTING_DOCUMENTATION.md # Generated by CI with test results
└── docs/                    # Additional documentation and badge snippets
```

## Quick Start

```bash
git clone https://github.com/diogoribeiro7/navier-stokes-solvers.git
cd navier-stokes-solvers
./scripts/install_dependencies.sh
make spectral   # build spectral solver
make fd         # build finite difference solver
./scripts/validate_installation.sh
```

Optional: launch the development container environment with

```bash
docker compose -f docker/docker-compose-dev.yml up --build
```

## Configuration

Runtime parameters are defined in `config/parameters.ini` and can be overridden by supplying additional `.ini` or `.json` files:

```bash
bin/ns_spectral_solver \
  --config config/parameters.ini \
  --config overrides/high_re.json
```

The `ns_config` module merges multiple files and validates values against a schema.

## Testing and CI

- `make test` runs the C regression suite.
- `./scripts/run_benchmarks.sh` executes multi-resolution performance sweeps.
- GitHub Actions (`test-and-document.yml`) covers Ubuntu 20.04/22.04 and macOS, GCC/Clang versions, Valgrind leak checks, and optional coverage.
- CI artifacts include logs, coverage reports, and an updated [TESTING_DOCUMENTATION.md](TESTING_DOCUMENTATION.md).

## Publication Assets

- Manuscript: `paper/manuscript.tex`, references in `paper/references.bib`.
- Figures: `paper/figures/scripts/*.py` regenerate PNGs in `paper/figures/generated/`.
- Captions: `paper/figures/captions/`.
- Slides: `presentation/slides.tex` and `presentation/generate_slides.py`.
- Blog draft: `blog_post.md`.

## Citation

If you use this project, please cite:

```bibtex
@software{ribeiro2025navierstokes,
  author       = {Ribeiro, Diogo},
  title        = {High-Order Navier-Stokes Solvers: Newton-Raphson Finite
                  Difference and Fourier Spectral Methods},
  year         = {2025},
  publisher    = {Zenodo},
  version      = {1.0.0},
  doi          = {10.5281/zenodo.XXXXXXX},
  url          = {https://github.com/diogoribeiro7/navier-stokes-solvers}
}
```

See `CITATION.cff` for a machine-readable entry and `docs/ZENODO_GUIDE.md` for deposit instructions.

## Contributing

Contributions are welcome! Please review:

- [CONTRIBUTING.md](CONTRIBUTING.md) for coding standards, testing, and workflow.
- `.github/ISSUE_TEMPLATE/` for bug/feature report templates.
- `.github/PULL_REQUEST_TEMPLATE.md` for the PR checklist.

We ask that you:

- Include regression tests for new features or bug fixes.
- Update documentation/figures when outputs change.
- Let CI regenerate `TESTING_DOCUMENTATION.md` on merge.

## License

Released under the [MIT License](LICENSE).

## Acknowledgements

- Diogo Ribeiro (ESMAD - Instituto Politecnico do Porto) and community contributors.
- Benchmarks reference Ghia et al. (1982), Taylor & Green (1937), and spectral methodology by Canuto et al. (2007).

*If this project helps your research, please star the repository or share your results with the community!*
